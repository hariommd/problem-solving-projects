<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake and Ladder</title>
    <style>
        body{
            margin: 0;
            padding: 0;
            background-color: #808080;
        }
        h1{
            text-align: center;
        }
        .snake-ladder-container{
            position: relative;
            padding: 2%;
            display: grid;
            min-height: 70vh;
            grid-template-columns: 1fr repeat(9,1fr);
            margin: 20px;
        }
        .box-item{
            position: relative;
            display: grid;
            place-items: center;
            background-color: #808080;
            color: #fff;
            border: 1px solid #fff;
            min-height: 40px;
        }

        .box-item:nth-child(even){
            background-color: #fff;
            color: #000;
            border: 1px solid #000;
        }
        .roll-dice{
            position: fixed;
            top: 20%;
            right:0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 60px;
            min-height: 60px;
            padding: 10px;
            background-color: rgba(255, 0, 0, 0.479);
            color: #fff;
            border-radius: 15px;
            font-size: 2rem;
            cursor: pointer;
        }
        .roll-dice:hover{
            background-color: #f00;
            color: #000;
        }
        /* .roll-dice span{
            display: inline-block;
            height: 5px;
            width: 5px;
            background-color: #000;
            margin: 5px;
            border-radius: 50%;
        } */
        .player-icon{
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            background-color: #f00;
            height: 20px;
            width: 20px;
            border-radius: 40px;
        }
        @media screen and (max-width:767px) {
            .roll-dice{
                height: 40px;
                width: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- <h1>Snake and Ladder Game</h1> -->
    <section class="snake-ladder">
        <div class="snake-ladder-container" id="snake-ladder-container">
           
        </div>
        <div class="roll-dice" onclick="rollDice()" id="roll-dice">1
        </div>
        
    </section>
    <script>
        //Accessing Required Elements 
        let rollDiceContainer = document.getElementById('roll-dice');
        let boxContainer = document.getElementById('snake-ladder-container');
        let playerIconContainer =document.getElementById('player-icon');

    
        //Generating Grid Layout for Structure
        for(let i=100;i>=0;i--){
            let boxItem = document.createElement('div');
            boxItem.classList.add('box-item');
            boxItem.textContent=i;
            boxItem.id=`box-item${i}`
            boxContainer.appendChild(boxItem)
        }

        //Set Current Move
        var currentMove = 0;
        playerMove(`box-item${currentMove}`);

        //To Roll Dice 
        function rollDice(){
            let i = Math.ceil(Math.random()*6);
            rollDiceContainer.innerHTML=i;
            if(currentMove+i<=100){
                setTimeout(()=>{
                removePlayerIcon(`box-item${currentMove}`)
                currentMove+=i;
                isLadder(currentMove);
                playerMove(`box-item${currentMove}`);
                setTimeout(()=>{
                    if(currentMove==100){
                    alert("Congratulations !!")
                }
                },500)
            },500)
            }
            
        }

        //Add player icon to Current Position
        function playerMove(id){
            let playerIcon = document.createElement('div');
            playerIcon.classList.add('player-icon')
            let currentBox = document.getElementById(id);
            currentBox.appendChild(playerIcon)
        }

        //Remove player icon from previous Position
        function removePlayerIcon(id){
            let currentBox = document.getElementById(id);
            currentBox.removeChild(currentBox.lastChild);  
        }

        // Creating Ladder List
        let ladderList = {
            4:11,
            6:96
        };

        //Checking if Ladder is Present on Current Move
        function isLadder(id){
            let res = Object.keys(ladderList).filter((item)=>{
                return item==id;
            });
            if(res.length>0){
                currentMove=ladderList[id]
            }
        };

        //Decorating Ladder Presence
        const genRanHex = size => [...Array(size)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');
        for (const [key, value] of Object.entries(ladderList)) {
            let color = genRanHex(6)
            // document.getElementById(`box-item${key}`).style.backgroundColor=`#${color}`;
            // document.getElementById(`box-item${value}`).style.backgroundColor=`#${color}`;
            console.log("This info for>>>",key,document.getElementById(`box-item${key}`).getBoundingClientRect(),document.getElementById(`box-item${value}`).getBoundingClientRect())
            let {x,y,height} = document.getElementById(`box-item${key}`).getBoundingClientRect();
            //let {y} = document.getElementById(`box-item${value}`).getBoundingClientRect();

            let ladderTopHeight = document.getElementById(`box-item${value}`).getBoundingClientRect().height;
            // let height = Math.abs(y-x);
            drawLadder(key,x,y,height)
            // <svg width="500" height="500"><line x1="50" y1="50" x2="350" y2="50" stroke="red"/></svg>
        };

        //Ladder Drawer
        function drawLadder(key,x,y,height){
            
            let svgContainer = document.createElementNS('http://www.w3.org/2000/svg', 'svg')
            let svgRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect')


            svgContainer.setAttribute("height",y-height);
            svgContainer.setAttribute("width",50);
            svgContainer.id=`svgforBox${key}`;
            svgContainer.style.position="absolute";
            svgContainer.style.top=height;
            svgContainer.style.left=x;

            svgRect.setAttribute("height",y-height);
            svgRect.setAttribute("width",50);
            svgRect.setAttribute("stroke", "#f00");
            svgRect.setAttribute("stroke-width", "5px");
            svgRect.setAttribute("fill", "transparent");



            svgContainer.appendChild(svgRect)
            document.getElementsByClassName('snake-ladder-container')[0].appendChild(svgContainer);
        }
    </script>
</body>
</html>